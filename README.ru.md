# Вариант шаблона окружения для разработки WP-темы

Быстрый старт
---

Просто:
 - запустите `docker-compose up -d`
 - скопируйте любой подходящий бойлерплейт wordpress-темы в папку `./theme`
 - откройте [localhost:8000](localhost:8000) в браузере, установите WP и внесите необходимые изменения из админ-панели (если нужно)  
 - вперед!

Для тех, кто не очень опытен в использовании докера в разработке, особенно применительно к разработке тем для wordpress, ниже предлагается немного более детальное описание работы.

Подготовка окружения
---

Вся механика завязана на докер и его инфраструктуру. Посмотреть её параметры можно в `docker-compose.yml`. Соответственно, для начала работы нужно иметь установленные у себя:
- Docker
- Docker-Compose

Важно проверить запускаемость первого и второго  (например, для линукса есть неочевидный момент с запуском демона, без которого Докер просто не будет стартовать).

Если успешно запускается `docker run hello-world` - скорее всего и дальше все будет ок.

Начало работы
-

Окружение запускается одной командой `docker-compose up`. Это удобно, если используется терминальный мультиплексор или просто хочется видеть, что происходит. А еще так можно легко останавливать приложение и всю обвязку с помощью `Ctrl+C`.

Но обычно используют команду `docker-compose up -d`, которая запускает контейнеры в так называемом обособленном состоянии. То есть команда выведет в терминал несколько строк статуса запуска контейнеров и выйдет, оставив приложение работать как обычно. В этом случае для остановки контейнеров нужно выполнить ` docker-compose down`.

После запуска приложения у нас есть две точки входа:

- [localhost:8000](localhost:8000) - собственно наш сайт/приложение
- [localhost:8080](localhost:8080) - PhpMyAdmin

При первом запуске при входе на сайт будет предложено завершить установку вордпресс - ввести данные администратора. В дальнейшем файлы WordPress остаются в папке `_wp_data` и в обычной ситуации переустановки не требуют.

Если что-то пошло не так, и нужно очистить все созданные контейнеры, чтоб потом пересобрать эту структуру с нуля - очистить все можно командой ` docker-compose down --volumes`.

Структура проекта
-

- `docker-compose.yml` - основной файл конфигурации, который задает инфраструктуру для проекта.
- `_wp_plugins` - том, подключаемый в качестве аналогичной директории в каталоге WordPress. Выведен на верхний уровень для хранения в системе контроля версий. Плагины в этой директории нужно перед использованием включить в админке.
- `_wp_uploads` - том, подключаемый в качестве директории `Uploads` в каталоге WordPress. Выведен на верхний уровень для хранения в системе контроля версий.
- `theme` - рабочая папка с темой, где и выполняется работа.

После развертывания инфраструктуры в папке с проектом должно появиться еще два каталога:

- `_wp_data` - файлы WordPress, размещенные локально. На случай, если они вдруг понадобятся (например, чтоб собрать архив с проектом для сдачи)
- `_db_data` - физические файлы базы данных.

*Подчеркивание `_` в начале названия обозначает, что это скорее служебные файлы/папки, и в обычной ситуации там не нужно ничего вручную править.*

Инфраструктура приложения
-

После развертывания приложения мы получаем:
- Базу данных
- Веб-сервер с установленным WordPress
- PhpMyAdmin на отдельном порту (скорее на случай необходимости импорта/експорта базы данных)
